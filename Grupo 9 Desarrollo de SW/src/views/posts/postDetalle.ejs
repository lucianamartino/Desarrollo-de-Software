<%- include('../partials/_header'); %>
<main>
    <h1 class="nombre-form"><p><strong>Descripcion:</strong> <%= post.despcripcion %></p></h1>

    <div class="container-post-detalle">
        <% if (post.foto.length > 1) { %>
            <!-- Contenedor de galería con flechas de navegación -->
            <div class="gallery">
                <button class="gallery-button prev" onclick="changeImage(-1)">&#10094;</button>
                
                <% post.foto.forEach((foto, index) => { %>
                    <img src="/uploads/<%= foto %>" alt="Foto del post" class="gallery-image"  style="display: <%= index === 0 ? 'block' : 'none' %>" data-index="<%= index %>">
                <% }) %>

                <button class="gallery-button next" onclick="changeImage(1)">&#10095;</button>
            </div>
        <% } else { %>
            <!-- Muestra una sola imagen si no hay más de una -->
            <img src="/uploads/<%= post.foto[0] %>" alt="Foto del post" />
        <% } %>


        <div class="detalle-post">
            <div class="parte principal">
                <p>Descripcion: <%= post.despcripcion %></p>
                <p>Autor:<%= post.nombreUsuario %></p>
                <p>Rubro:<%= post.nombreOficio %></p>
                <p>Fecha de publicación: <%= new Date(post.fecha).toLocaleDateString() %></p>
                <p>Valoración: <%= post.valoracion %></p>
            </div>
            <div class="parte secundaria">
                <h3>Comentarios</h3>
            </div>
        </div><!-- detalle-post -->
    </div><!-- container-post-detail -->

    <a href="/perfiles/<%= post.Usuario_idUsuario %>" class="boton-amarillo-block">Ver Perfil</a> 
</main>
<script>
    let currentIndex = 0;
    const images = document.querySelectorAll('.gallery-image');

    function changeImage(direction) {
        images[currentIndex].style.display = 'none';
        currentIndex = (currentIndex + direction + images.length) % images.length;
        images[currentIndex].style.display = 'block';
    }
</script>
<%- include('../partials/_footer'); %>
